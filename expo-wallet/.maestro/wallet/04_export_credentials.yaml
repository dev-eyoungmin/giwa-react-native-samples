appId: ${APP_ID}
name: Export Wallet Credentials
---
# Test: Export mnemonic and private key from existing wallet

# Launch app (assumes wallet already exists)
- launchApp

# Wait for wallet screen to load
- extendedWaitUntil:
    visible: "GIWA Wallet"
    timeout: 10000

# Check if wallet exists, if not create one
- runFlow:
    when:
      visible: "Create New Wallet"
    file: 01_create_wallet.yaml

# Test Export Mnemonic
- tapOn: "Export Mnemonic"

# Handle security warning or biometric prompt
- extendedWaitUntil:
    visible:
      anyOf:
        - "Exported Credentials"
        - "Security Warning"
        - "Authentication required"
    timeout: 5000

# If security warning appears, tap Continue
- runFlow:
    when:
      visible: "Security Warning"
    commands:
      - tapOn: "Continue"
      - extendedWaitUntil:
          visible: "Exported Credentials"
          timeout: 5000

# Verify export modal appears
- assertVisible: "Never share these credentials"
- assertVisible: "Copy to Clipboard"

# Close the modal
- tapOn: "Done"

# Test Export Private Key
- tapOn: "Export Private Key"

# Handle security warning or biometric prompt
- extendedWaitUntil:
    visible:
      anyOf:
        - "Exported Credentials"
        - "Security Warning"
    timeout: 5000

# If security warning appears, tap Continue
- runFlow:
    when:
      visible: "Security Warning"
    commands:
      - tapOn: "Continue"
      - extendedWaitUntil:
          visible: "Exported Credentials"
          timeout: 5000

# Verify private key export
- assertVisible: "0x"
- assertVisible: "Copy to Clipboard"

# Close the modal
- tapOn: "Done"
